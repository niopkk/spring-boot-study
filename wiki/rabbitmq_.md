

#### 消息中间件的两种模式

**点对点模式**:点对点模式是基于队列的，消息生产 者发送消息到队列，消息消费者从队列中接收消息，队列的存在使得消息的异步传输成为可能

**发布/订阅(Pub/Sub)模式**:发布订阅模式定义了如何向一个内容节点发布和订阅消息，这个内容节点称为主题(topic)，主 题可以认为是消息传递的中介，消息发布者将消息发布到某个主题，而消息订阅者则从主题中 订阅消息。主题使得消息的订阅者与消息的发布者互相保持独立，不需要进行接触即可保证消息的传递，发布/订阅模式在消息的一对多广播时采用.

#### 消息中间件的作用

**解耦:** 消息中间件在处理过程中间插入了一个隐含的、基于数据的接口层，两边的处理过程都要实现这一接口，允许独立的扩展或修改两边的处理程序，只要确保它们准守同样的接口约束即可。

**冗余(存储):** 有些情况下处理数据过程会失败。消息中间件可以把数据进行持久化直到它们已经被完全处理，通过这一方式规避了数据丢失风险。在把一个消息从消息中间件中删除之前，需要处理系统明确的支持该消息已经被处理完成，从而确保数据被安全保存直到使用完毕。

**扩展性:**因为消息中间件解耦了应用的处理过程，所以提高消息入队和处理的效率还是很容易的，只要另外增加处理过程即可，不需要改变代码，也不需要调节参数。

**削峰:**在访问量剧增的情况下，应用仍然需要继续发挥作用，但这样的突发流量并不常有。使用消息中间件能狗使关键组件支撑突发访问压力，不会因为突发的超负荷请求而完全崩溃。

**可恢复性:**当系统一部分组件失效时，不会影响到整个系统。消息中间件降低了进程间的耦合度，所以即使一个处理消息的进程挂掉，加入消息中间件中的消息仍然可以在系统恢复后进行处理。

**顺序保证:**在大多数使用场景下，数据的处理顺序很重要，大部分消息中间件支持一定程度的顺序性。

**缓冲:** 在任何重要的系统中，都存在需要不同处理时间的元素。消息中间件通过一个缓冲层来帮助任务最高效的执行，写入消息中间件的处理会尽可能快速。该缓冲区有助于控制和优化数据流经过系统的速度。

**异步通信:**很多时候应用不想也不需要立即处理消息。消息中间件提供了异步处理机制，允许应用把一些消息放入消息中间件中，但并不立即处理它，在之后需要的时候在慢慢处理。

rabbitmq架构图

![image-20200927162022079](/Users/tianxin2/tianxin/spring-boot-study/wiki/img/rabbitmq/jiagou.png)